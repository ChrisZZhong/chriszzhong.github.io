---
layout: post
title: "Thread in Java"
date: 2023-03-30
description: "Thread in Java"
tag: Java Core
---

# Thread

## Create a thread

1. Implement Runnable interface or extend Thread class

   Generally, we use Runnable interface instead of Thread class

   1. Thread class implements the runnable interface, when extending the Thread class, we only override the run() method of Runnable instead of all, this is a violation of `IS-A` Thread principle.
   2. Another is after extending Thread class, we `can’t extend` another class.

2. Callable and Future

   Callable is similar to Runnable, but it can `return a result` and `throw a checked exception`. It’s `call()` method returns a result after the thread execution is complete

   The Future interface represents the result of Thread. When the thread is executed, we can get the result of the thread through the Future object.

   **`DownSide`**: Threads should be independent, but Callable will block the main thread, so we need to use CompletableFuture to solve this problem.

3. CompletableFuture

   We can use CompletableFuture instead of implementing
   Runnable interface to create new threads, but under the hood, it still uses the Runnable to implement the multi-threading.

   Use Filterchain to handle the result of the thread.

## ExecutorService

`ExecutorService` is a thread pool used to manage threads, and can submit tasks to the thread pool for execution. Generally, we can use `ExecutorService` to run Runnable, Callable, CompletableFuture threads.

Advantages:

- easy to manage threads and reuse threads, which can reduce the overhead of thread creation and improve performance.

- can limit the number of threads, avoid too many threads to cause system crash.

Disadvantages:

- a careless threads pool size can halt the system and bring performance down

- Always shut down the executor service after tasks are completed and service is no lon..ger needed. Otherwise, JVM will never terminate.
